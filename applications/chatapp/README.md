# ChatApplication - GitOps Configuration

## Overview

This directory contains deployment configurations for the ChatApplication across all environments.

## Structure

```
chatapp/
├── dev/
│   ├── deployment.yaml    # Version tracking (auto-updated by CI)
│   ├── values.yaml        # Helm values override
│   └── config.yaml        # Environment-specific config
├── staging/
│   └── (same structure)
└── prod/
    └── (same structure)
```

## Files

### deployment.yaml
- **Auto-generated by CI pipeline**
- Contains version, image tags, ECR registry
- Updated when CI builds and pushes images
- **Do not manually edit** (will be overwritten)

### values.yaml
- Helm values override for this environment
- Merges with base Helm chart values
- Can be manually edited for environment-specific configs

### config.yaml
- Environment-specific configuration
- Overrides company defaults
- Application-specific settings

## CI/CD Integration

### CI Pipeline Updates
When CI builds images:
1. Builds Docker images
2. Pushes to ECR
3. Updates `deployments/{env}/deployment.yaml` with new version
4. Commits and pushes to GitOps repo

### CD Pipeline/ArgoCD
- Reads `deployments/{env}/deployment.yaml` for version
- Reads `values.yaml` for Helm values
- Deploys via Helm or ArgoCD sync

## Manual Overrides

If you need to manually override:
- **values.yaml**: Edit directly, commit
- **config.yaml**: Edit directly, commit
- **deployment.yaml**: Not recommended (CI will overwrite)

## Environment-Specific Notes

### Dev
- Lower resource limits
- Single replica
- Development domain

### Staging
- Medium resource limits
- 2 replicas
- Staging domain

### Prod
- Higher resource limits
- 2+ replicas
- Production domain
- Requires approval for deployments

