# =========================================
# Redis Subchart - Default Values
# =========================================

# Enable/disable Redis deployment
enabled: true

# Number of Redis replicas (1 for standalone, 3+ for cluster)
replicaCount: 1

# Redis image configuration
image:
  repository: redis
  tag: "7-alpine"
  pullPolicy: IfNotPresent

# Service configuration
service:
  type: ClusterIP
  port: 6379
  targetPort: 6379
  # Service name will be: <release-name>-redis

# Resource limits and requests
resources:
  requests:
    memory: 64Mi
    cpu: 50m
  limits:
    memory: 128Mi
    cpu: 100m

# Liveness and readiness probes
livenessProbe:
  enabled: true
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  successThreshold: 1
  failureThreshold: 3
  exec:
    command:
      - redis-cli
      - ping

readinessProbe:
  enabled: true
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 1
  successThreshold: 1
  failureThreshold: 3
  exec:
    command:
      - redis-cli
      - ping

# Persistence configuration (disabled by default for dev)
persistence:
  enabled: false
  # storageClass: "gp3"  # AWS EBS gp3 for production
  # accessMode: ReadWriteOnce
  # size: 8Gi
  # mountPath: /data

# Security context
# securityContext:
#   runAsNonRoot: true
#   runAsUser: 999
#   fsGroup: 999

# # Pod security context
# podSecurityContext:
#   fsGroup: 999

# Node selector, tolerations, and affinity
nodeSelector: {}
tolerations: []
affinity: {}

# Redis configuration (optional)
# redisConfig: |
#   maxmemory 100mb
#   maxmemory-policy allkeys-lru
